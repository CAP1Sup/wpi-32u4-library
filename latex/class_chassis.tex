\hypertarget{class_chassis}{}\doxysection{Chassis Class Reference}
\label{class_chassis}\index{Chassis@{Chassis}}


{\ttfamily \#include $<$Chassis.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_chassis_a9ca3bb2acc5fca17167d22b8c91dd348}{Chassis}} (float wheel\+Diam, float ticks\+Per\+Revolution, float wheel\+Track)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_chassis}{Chassis}} constructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_chassis_a4f8b23f342dc50e5e1db99ed604a158d}{init}} (void)
\begin{DoxyCompactList}\small\item\em Initializes the chassis. Must be called in setup(). \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_chassis_ac16ad3ccac7f73002304f2b6aa56a2fa}\label{class_chassis_ac16ad3ccac7f73002304f2b6aa56a2fa}} 
void {\bfseries set\+Motor\+PIDcoeffs} (float kp, float ki)
\begin{DoxyCompactList}\small\item\em Sets PID coefficients for the motors. Not independent. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_chassis_a1eb5eccbd204264810380e611ae1f78e}{idle}} (void)
\begin{DoxyCompactList}\small\item\em Idles chassis. Motors will stop. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_chassis_aa331bdac0a5b09766c9e60cfe6ddb9e5}{set\+Motor\+Efforts}} (int left\+Effort, int right\+Effort)
\begin{DoxyCompactList}\small\item\em Sets motor efforts. Max speed is 420. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_chassis_ae97448d7a31ffab1875cb734744fa323}{set\+Wheel\+Speeds}} (float left\+Speed, float right\+Speed)
\begin{DoxyCompactList}\small\item\em Sets target wheel speeds in cm/sec. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_chassis_a9df2eb75e840a9d366c58a1fad4a07d1}{set\+Twist}} (float forward\+Speed, float turning\+Speed)
\begin{DoxyCompactList}\small\item\em Sets target motion for the chassis. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_chassis_ab6b49ab2f8cd9fcd7b96b54ddabe7b6e}{drive\+For}} (float forward\+Distance, float forward\+Speed)
\begin{DoxyCompactList}\small\item\em Commands the robot to drive at a distance and speed. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_chassis_a45ebac4a8eab9043a9d591a4350d847f}{turn\+For}} (float turn\+Angle, float turning\+Speed)
\begin{DoxyCompactList}\small\item\em Commands the chassis to turn a set angle. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_chassis_a8a6d33ece1e01448a79d0f43d907b507}{check\+Motion\+Complete}} (void)
\begin{DoxyCompactList}\small\item\em Checks if the motion commanded by \mbox{\hyperlink{class_chassis_ab6b49ab2f8cd9fcd7b96b54ddabe7b6e}{drive\+For()}} or \mbox{\hyperlink{class_chassis_a45ebac4a8eab9043a9d591a4350d847f}{turn\+For()}} is done. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_chassis_a519a324fc3d20af9634e65dfd05595f6}\label{class_chassis_a519a324fc3d20af9634e65dfd05595f6}} 
void {\bfseries print\+Speeds} (void)
\item 
\mbox{\Hypertarget{class_chassis_a47f224be64409c9ad022f53c49f80913}\label{class_chassis_a47f224be64409c9ad022f53c49f80913}} 
void {\bfseries update\+Encoder\+Deltas} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_chassis_a531d617b3667bb6475cace9162cee63f}\label{class_chassis_a531d617b3667bb6475cace9162cee63f}} 
\mbox{\hyperlink{class_left_motor}{Left\+Motor}} {\bfseries left\+Motor}
\item 
\mbox{\Hypertarget{class_chassis_afd405dba636f7552d713be0448937a36}\label{class_chassis_afd405dba636f7552d713be0448937a36}} 
\mbox{\hyperlink{class_right_motor}{Right\+Motor}} {\bfseries right\+Motor}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_chassis_a30e0573f6c90b7bb734244f8bd648880}\label{class_chassis_a30e0573f6c90b7bb734244f8bd648880}} 
const float {\bfseries cm\+Per\+Encoder\+Tick}
\item 
\mbox{\Hypertarget{class_chassis_ae15401fac2c48344b597e27450c03157}\label{class_chassis_ae15401fac2c48344b597e27450c03157}} 
const float {\bfseries robot\+Radius}
\item 
\mbox{\Hypertarget{class_chassis_a2eb6aefbd5db164333e842a0afc78cda}\label{class_chassis_a2eb6aefbd5db164333e842a0afc78cda}} 
const uint16\+\_\+t {\bfseries ctrl\+Interval\+MS} = 16
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{class_chassis}{Chassis}} class manages the motors and encoders.

\mbox{\hyperlink{class_chassis}{Chassis}} sets up a hardware-\/based timer on a 16ms interval. At each interrupt, it reads the current encoder counts and, if controlling for speed, calculates the effort using a PID controller for each motor, which can be adjusted by the user.

The encoders are attached automatically and the encoders will count regardless of the state of the robot.

Several methods are provided for low level control to commands for driving or turning. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_chassis_a9ca3bb2acc5fca17167d22b8c91dd348}\label{class_chassis_a9ca3bb2acc5fca17167d22b8c91dd348}} 
\index{Chassis@{Chassis}!Chassis@{Chassis}}
\index{Chassis@{Chassis}!Chassis@{Chassis}}
\doxysubsubsection{\texorpdfstring{Chassis()}{Chassis()}}
{\footnotesize\ttfamily Chassis\+::\+Chassis (\begin{DoxyParamCaption}\item[{float}]{wheel\+Diam,  }\item[{float}]{ticks\+Per\+Revolution,  }\item[{float}]{wheel\+Track }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



\mbox{\hyperlink{class_chassis}{Chassis}} constructor. 


\begin{DoxyParams}{Parameters}
{\em wheel\+Diam} & Wheel diameter in cm. \\
\hline
{\em ticks\+Per\+Revolution} & Enccoder ticks per {\itshape wheel} revolution. \\
\hline
{\em wheel\+Track} & Distance between wheels in cm. \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_chassis_a8a6d33ece1e01448a79d0f43d907b507}\label{class_chassis_a8a6d33ece1e01448a79d0f43d907b507}} 
\index{Chassis@{Chassis}!checkMotionComplete@{checkMotionComplete}}
\index{checkMotionComplete@{checkMotionComplete}!Chassis@{Chassis}}
\doxysubsubsection{\texorpdfstring{checkMotionComplete()}{checkMotionComplete()}}
{\footnotesize\ttfamily bool Chassis\+::check\+Motion\+Complete (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Checks if the motion commanded by \mbox{\hyperlink{class_chassis_ab6b49ab2f8cd9fcd7b96b54ddabe7b6e}{drive\+For()}} or \mbox{\hyperlink{class_chassis_a45ebac4a8eab9043a9d591a4350d847f}{turn\+For()}} is done. 

\begin{DoxyReturn}{Returns}
Returns true if the motion is complete. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_chassis_ab6b49ab2f8cd9fcd7b96b54ddabe7b6e}\label{class_chassis_ab6b49ab2f8cd9fcd7b96b54ddabe7b6e}} 
\index{Chassis@{Chassis}!driveFor@{driveFor}}
\index{driveFor@{driveFor}!Chassis@{Chassis}}
\doxysubsubsection{\texorpdfstring{driveFor()}{driveFor()}}
{\footnotesize\ttfamily void Chassis\+::drive\+For (\begin{DoxyParamCaption}\item[{float}]{forward\+Distance,  }\item[{float}]{forward\+Speed }\end{DoxyParamCaption})}



Commands the robot to drive at a distance and speed. 

The chassis will stop when the distance is reached.


\begin{DoxyParams}{Parameters}
{\em forward\+Distance} & Target distance in cm \\
\hline
{\em forward\+Speed} & Target speed rate in cm/sec \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_chassis_a1eb5eccbd204264810380e611ae1f78e}\label{class_chassis_a1eb5eccbd204264810380e611ae1f78e}} 
\index{Chassis@{Chassis}!idle@{idle}}
\index{idle@{idle}!Chassis@{Chassis}}
\doxysubsubsection{\texorpdfstring{idle()}{idle()}}
{\footnotesize\ttfamily void Chassis\+::idle (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Idles chassis. Motors will stop. 

Stops the motors. It calls \mbox{\hyperlink{class_chassis_aa331bdac0a5b09766c9e60cfe6ddb9e5}{set\+Motor\+Efforts()}} so that the wheels won\textquotesingle{}t lock. Use set\+Speeds() if you want the wheels to \textquotesingle{}lock\textquotesingle{} in place. \mbox{\Hypertarget{class_chassis_a4f8b23f342dc50e5e1db99ed604a158d}\label{class_chassis_a4f8b23f342dc50e5e1db99ed604a158d}} 
\index{Chassis@{Chassis}!init@{init}}
\index{init@{init}!Chassis@{Chassis}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily void Chassis\+::init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Initializes the chassis. Must be called in setup(). 

Call \mbox{\hyperlink{class_chassis_a4f8b23f342dc50e5e1db99ed604a158d}{init()}} in your setup() routine. It sets up some internal timers so that the speed controllers for the wheels will work properly.

Here\textquotesingle{}s how it works\+: Motor\+::init() starts a hardware timer on a 16 ms loop. Every time the timer \char`\"{}rolls over,\char`\"{} an interrupt service routine (ISR) is called that updates the motor speeds and sets a flag to notify \mbox{\hyperlink{class_chassis}{Chassis}} that it is time to calculate the control inputs.

When set up this way, pins 6, 12, and 13 cannot be used with analog\+Write() \mbox{\Hypertarget{class_chassis_aa331bdac0a5b09766c9e60cfe6ddb9e5}\label{class_chassis_aa331bdac0a5b09766c9e60cfe6ddb9e5}} 
\index{Chassis@{Chassis}!setMotorEfforts@{setMotorEfforts}}
\index{setMotorEfforts@{setMotorEfforts}!Chassis@{Chassis}}
\doxysubsubsection{\texorpdfstring{setMotorEfforts()}{setMotorEfforts()}}
{\footnotesize\ttfamily void Chassis\+::set\+Motor\+Efforts (\begin{DoxyParamCaption}\item[{int}]{left\+Effort,  }\item[{int}]{right\+Effort }\end{DoxyParamCaption})}



Sets motor efforts. Max speed is 420. 


\begin{DoxyParams}{Parameters}
{\em left\+Effort} & Effort for left motor \\
\hline
{\em right\+Effort} & Effort for right motor\\
\hline
\end{DoxyParams}
Sets the motor {\itshape efforts}. \mbox{\Hypertarget{class_chassis_a9df2eb75e840a9d366c58a1fad4a07d1}\label{class_chassis_a9df2eb75e840a9d366c58a1fad4a07d1}} 
\index{Chassis@{Chassis}!setTwist@{setTwist}}
\index{setTwist@{setTwist}!Chassis@{Chassis}}
\doxysubsubsection{\texorpdfstring{setTwist()}{setTwist()}}
{\footnotesize\ttfamily void Chassis\+::set\+Twist (\begin{DoxyParamCaption}\item[{float}]{forward\+Speed,  }\item[{float}]{turning\+Speed }\end{DoxyParamCaption})}



Sets target motion for the chassis. 


\begin{DoxyParams}{Parameters}
{\em forward\+Speed} & Target forward speed in cm/sec \\
\hline
{\em right\+Speed} & Target spin rate in deg/sec \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_chassis_ae97448d7a31ffab1875cb734744fa323}\label{class_chassis_ae97448d7a31ffab1875cb734744fa323}} 
\index{Chassis@{Chassis}!setWheelSpeeds@{setWheelSpeeds}}
\index{setWheelSpeeds@{setWheelSpeeds}!Chassis@{Chassis}}
\doxysubsubsection{\texorpdfstring{setWheelSpeeds()}{setWheelSpeeds()}}
{\footnotesize\ttfamily void Chassis\+::set\+Wheel\+Speeds (\begin{DoxyParamCaption}\item[{float}]{left\+Speed,  }\item[{float}]{right\+Speed }\end{DoxyParamCaption})}



Sets target wheel speeds in cm/sec. 


\begin{DoxyParams}{Parameters}
{\em left\+Speed} & Target speed for left wheel in cm/sec \\
\hline
{\em right\+Speed} & Target speed for right wheel in cm/sec \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_chassis_a45ebac4a8eab9043a9d591a4350d847f}\label{class_chassis_a45ebac4a8eab9043a9d591a4350d847f}} 
\index{Chassis@{Chassis}!turnFor@{turnFor}}
\index{turnFor@{turnFor}!Chassis@{Chassis}}
\doxysubsubsection{\texorpdfstring{turnFor()}{turnFor()}}
{\footnotesize\ttfamily void Chassis\+::turn\+For (\begin{DoxyParamCaption}\item[{float}]{turn\+Angle,  }\item[{float}]{turning\+Speed }\end{DoxyParamCaption})}



Commands the chassis to turn a set angle. 


\begin{DoxyParams}{Parameters}
{\em turn\+Angle} & Target angle to turn in degrees \\
\hline
{\em turning\+Speed} & Target spin rate in deg/sec \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/Chassis.\+h\item 
src/Chassis.\+cpp\end{DoxyCompactItemize}
