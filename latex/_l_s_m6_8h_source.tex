\hypertarget{_l_s_m6_8h_source}{}\doxysection{LSM6.\+h}
\label{_l_s_m6_8h_source}\index{src/LSM6.h@{src/LSM6.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef LSM6\_h}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define LSM6\_h}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <Arduino.h>}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{keyword}{class }\mbox{\hyperlink{class_l_s_m6}{LSM6}}}
\DoxyCodeLine{7 \{}
\DoxyCodeLine{8   \textcolor{keyword}{public}:}
\DoxyCodeLine{9     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{struct }\mbox{\hyperlink{struct_l_s_m6_1_1vector}{vector}}}
\DoxyCodeLine{10     \{}
\DoxyCodeLine{11       T x, y, z;}
\DoxyCodeLine{12     \};}
\DoxyCodeLine{13 }
\DoxyCodeLine{14     \textcolor{keyword}{enum} deviceType \{ device\_DS33, device\_auto \};}
\DoxyCodeLine{15     \textcolor{keyword}{enum} sa0State \{ sa0\_low, sa0\_high, sa0\_auto \};}
\DoxyCodeLine{16 }
\DoxyCodeLine{17     \textcolor{keyword}{enum} ACC\_FS \{ACC\_FS2, ACC\_FS4, ACC\_FS8, ACC\_FS16\};}
\DoxyCodeLine{18     \textcolor{keyword}{enum} GYRO\_FS \{GYRO\_FS245, GYRO\_FS500, GYRO\_FS1000, GYRO\_FS2000\};}
\DoxyCodeLine{19     \textcolor{keyword}{enum} ODR }
\DoxyCodeLine{20     \{}
\DoxyCodeLine{21       ODR13 = 0x1, }
\DoxyCodeLine{22       ODR26 = 0x2, }
\DoxyCodeLine{23       ODR52 = 0x3, }
\DoxyCodeLine{24       ODR104 = 0x4, }
\DoxyCodeLine{25       ODR208 = 0x5, }
\DoxyCodeLine{26       ODR416 = 0x6, }
\DoxyCodeLine{27       ODR833 = 0x7,}
\DoxyCodeLine{28       ODR166k = 0x8}
\DoxyCodeLine{29     \};}
\DoxyCodeLine{30 }
\DoxyCodeLine{31     \textcolor{comment}{// register addresses}}
\DoxyCodeLine{32     \textcolor{keyword}{enum} regAddr}
\DoxyCodeLine{33     \{}
\DoxyCodeLine{34       FUNC\_CFG\_ACCESS   = 0x01,}
\DoxyCodeLine{35 }
\DoxyCodeLine{36       FIFO\_CTRL1        = 0x06,}
\DoxyCodeLine{37       FIFO\_CTRL2        = 0x07,}
\DoxyCodeLine{38       FIFO\_CTRL3        = 0x08,}
\DoxyCodeLine{39       FIFO\_CTRL4        = 0x09,}
\DoxyCodeLine{40       FIFO\_CTRL5        = 0x0A,}
\DoxyCodeLine{41       ORIENT\_CFG\_G      = 0x0B,}
\DoxyCodeLine{42 }
\DoxyCodeLine{43       INT1\_CTRL         = 0x0D,}
\DoxyCodeLine{44       INT2\_CTRL         = 0x0E,}
\DoxyCodeLine{45       WHO\_AM\_I          = 0x0F,}
\DoxyCodeLine{46       CTRL1\_XL          = 0x10,}
\DoxyCodeLine{47       CTRL2\_G           = 0x11,}
\DoxyCodeLine{48       CTRL3\_C           = 0x12,}
\DoxyCodeLine{49       CTRL4\_C           = 0x13,}
\DoxyCodeLine{50       CTRL5\_C           = 0x14,}
\DoxyCodeLine{51       CTRL6\_C           = 0x15,}
\DoxyCodeLine{52       CTRL7\_G           = 0x16,}
\DoxyCodeLine{53       CTRL8\_XL          = 0x17,}
\DoxyCodeLine{54       CTRL9\_XL          = 0x18,}
\DoxyCodeLine{55       CTRL10\_C          = 0x19,}
\DoxyCodeLine{56 }
\DoxyCodeLine{57       WAKE\_UP\_SRC       = 0x1B,}
\DoxyCodeLine{58       TAP\_SRC           = 0x1C,}
\DoxyCodeLine{59       D6D\_SRC           = 0x1D,}
\DoxyCodeLine{60       STATUS\_REG        = 0x1E,}
\DoxyCodeLine{61 }
\DoxyCodeLine{62       OUT\_TEMP\_L        = 0x20,}
\DoxyCodeLine{63       OUT\_TEMP\_H        = 0x21,}
\DoxyCodeLine{64       OUTX\_L\_G          = 0x22,}
\DoxyCodeLine{65       OUTX\_H\_G          = 0x23,}
\DoxyCodeLine{66       OUTY\_L\_G          = 0x24,}
\DoxyCodeLine{67       OUTY\_H\_G          = 0x25,}
\DoxyCodeLine{68       OUTZ\_L\_G          = 0x26,}
\DoxyCodeLine{69       OUTZ\_H\_G          = 0x27,}
\DoxyCodeLine{70       OUTX\_L\_XL         = 0x28,}
\DoxyCodeLine{71       OUTX\_H\_XL         = 0x29,}
\DoxyCodeLine{72       OUTY\_L\_XL         = 0x2A,}
\DoxyCodeLine{73       OUTY\_H\_XL         = 0x2B,}
\DoxyCodeLine{74       OUTZ\_L\_XL         = 0x2C,}
\DoxyCodeLine{75       OUTZ\_H\_XL         = 0x2D,}
\DoxyCodeLine{76 }
\DoxyCodeLine{77       FIFO\_STATUS1      = 0x3A,}
\DoxyCodeLine{78       FIFO\_STATUS2      = 0x3B,}
\DoxyCodeLine{79       FIFO\_STATUS3      = 0x3C,}
\DoxyCodeLine{80       FIFO\_STATUS4      = 0x3D,}
\DoxyCodeLine{81       FIFO\_DATA\_OUT\_L   = 0x3E,}
\DoxyCodeLine{82       FIFO\_DATA\_OUT\_H   = 0x3F,}
\DoxyCodeLine{83       TIMESTAMP0\_REG    = 0x40,}
\DoxyCodeLine{84       TIMESTAMP1\_REG    = 0x41,}
\DoxyCodeLine{85       TIMESTAMP2\_REG    = 0x42,}
\DoxyCodeLine{86 }
\DoxyCodeLine{87       STEP\_TIMESTAMP\_L  = 0x49,}
\DoxyCodeLine{88       STEP\_TIMESTAMP\_H  = 0x4A,}
\DoxyCodeLine{89       STEP\_COUNTER\_L    = 0x4B,}
\DoxyCodeLine{90       STEP\_COUNTER\_H    = 0x4C,}
\DoxyCodeLine{91 }
\DoxyCodeLine{92       FUNC\_SRC          = 0x53,}
\DoxyCodeLine{93 }
\DoxyCodeLine{94       TAP\_CFG           = 0x58,}
\DoxyCodeLine{95       TAP\_THS\_6D        = 0x59,}
\DoxyCodeLine{96       INT\_DUR2          = 0x5A,}
\DoxyCodeLine{97       WAKE\_UP\_THS       = 0x5B,}
\DoxyCodeLine{98       WAKE\_UP\_DUR       = 0x5C,}
\DoxyCodeLine{99       FREE\_FALL         = 0x5D,}
\DoxyCodeLine{100       MD1\_CFG           = 0x5E,}
\DoxyCodeLine{101       MD2\_CFG           = 0x5F,}
\DoxyCodeLine{102     \};}
\DoxyCodeLine{103 }
\DoxyCodeLine{104     vector<int16\_t> a; \textcolor{comment}{// accelerometer readings}}
\DoxyCodeLine{105     vector<int16\_t> g; \textcolor{comment}{// gyro readings}}
\DoxyCodeLine{106     vector<float> dps;}
\DoxyCodeLine{107 }
\DoxyCodeLine{108     \textcolor{comment}{//conversion factors}}
\DoxyCodeLine{109     \textcolor{keywordtype}{float} mdps = 0;}
\DoxyCodeLine{110     \textcolor{keywordtype}{float} mg = 0;}
\DoxyCodeLine{111     \textcolor{comment}{//float odrGyro = 0;}}
\DoxyCodeLine{112 }
\DoxyCodeLine{113     uint8\_t last\_status; \textcolor{comment}{// status of last I2C transmission}}
\DoxyCodeLine{114 }
\DoxyCodeLine{115     \mbox{\hyperlink{class_l_s_m6}{LSM6}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{116 }
\DoxyCodeLine{117     \textcolor{keywordtype}{bool} init(deviceType device = device\_auto, sa0State sa0 = sa0\_auto);}
\DoxyCodeLine{118     deviceType getDeviceType(\textcolor{keywordtype}{void}) \{ \textcolor{keywordflow}{return} \_device; \}}
\DoxyCodeLine{119 }
\DoxyCodeLine{120     \textcolor{keywordtype}{void} enableDefault(\textcolor{keywordtype}{void});}
\DoxyCodeLine{121 }
\DoxyCodeLine{122 \textcolor{keyword}{public}:}
\DoxyCodeLine{123     \textcolor{keywordtype}{void} writeReg(uint8\_t reg, uint8\_t value);}
\DoxyCodeLine{124     uint8\_t readReg(uint8\_t reg);}
\DoxyCodeLine{125 }
\DoxyCodeLine{126     \textcolor{keywordtype}{void} readAcc(\textcolor{keywordtype}{void});}
\DoxyCodeLine{127     \textcolor{keywordtype}{void} readGyro(\textcolor{keywordtype}{void});}
\DoxyCodeLine{128     \textcolor{keywordtype}{void} read(\textcolor{keywordtype}{void});}
\DoxyCodeLine{129 }
\DoxyCodeLine{130     \textcolor{keywordtype}{void} setFullScaleGyro(GYRO\_FS gfs);}
\DoxyCodeLine{131     \textcolor{keywordtype}{void} setFullScaleAcc(ACC\_FS afs);}
\DoxyCodeLine{132 }
\DoxyCodeLine{133     \textcolor{keywordtype}{void} setGyroDataOutputRate(ODR);}
\DoxyCodeLine{134     \textcolor{keywordtype}{void} setAccDataOutputRate(ODR);}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \textcolor{keywordtype}{void} setTimeout(uint16\_t timeout);}
\DoxyCodeLine{137     uint16\_t getTimeout(\textcolor{keywordtype}{void});}
\DoxyCodeLine{138     \textcolor{keywordtype}{bool} timeoutOccurred(\textcolor{keywordtype}{void});}
\DoxyCodeLine{139 }
\DoxyCodeLine{140     uint8\_t getStatus(\textcolor{keywordtype}{void}) \{\textcolor{keywordflow}{return} readReg(LSM6::STATUS\_REG);\}}
\DoxyCodeLine{141 }
\DoxyCodeLine{142     \textcolor{comment}{// vector functions}}
\DoxyCodeLine{143     \textcolor{comment}{//template <typename Ta, typename Tb, typename To> static void vector\_cross(const vector<Ta> *a, const vector<Tb> *b, vector<To> *out);}}
\DoxyCodeLine{144     \textcolor{comment}{//template <typename Ta, typename Tb> static float vector\_dot(const vector<Ta> *a, const vector<Tb> *b);}}
\DoxyCodeLine{145     \textcolor{comment}{//static void vector\_normalize(vector<float> *a);}}
\DoxyCodeLine{146 }
\DoxyCodeLine{147   \textcolor{keyword}{private}:}
\DoxyCodeLine{148     deviceType \_device; \textcolor{comment}{// chip type}}
\DoxyCodeLine{149     uint8\_t address;}
\DoxyCodeLine{150 }
\DoxyCodeLine{151     uint16\_t io\_timeout;}
\DoxyCodeLine{152     \textcolor{keywordtype}{bool} did\_timeout;}
\DoxyCodeLine{153 }
\DoxyCodeLine{154     int16\_t testReg(uint8\_t address, regAddr reg);}
\DoxyCodeLine{155 \};}
\DoxyCodeLine{156 }
\DoxyCodeLine{157 }
\DoxyCodeLine{158 \textcolor{comment}{// template <typename Ta, typename Tb, typename To> void LSM6::vector\_cross(const vector<Ta> *a, const vector<Tb> *b, vector<To> *out)}}
\DoxyCodeLine{159 \textcolor{comment}{// \{}}
\DoxyCodeLine{160 \textcolor{comment}{//   out-\/>x = (a-\/>y * b-\/>z) -\/ (a-\/>z * b-\/>y);}}
\DoxyCodeLine{161 \textcolor{comment}{//   out-\/>y = (a-\/>z * b-\/>x) -\/ (a-\/>x * b-\/>z);}}
\DoxyCodeLine{162 \textcolor{comment}{//   out-\/>z = (a-\/>x * b-\/>y) -\/ (a-\/>y * b-\/>x);}}
\DoxyCodeLine{163 \textcolor{comment}{// \}}}
\DoxyCodeLine{164 }
\DoxyCodeLine{165 \textcolor{comment}{// template <typename Ta, typename Tb> float LSM6::vector\_dot(const vector<Ta> *a, const vector<Tb> *b)}}
\DoxyCodeLine{166 \textcolor{comment}{// \{}}
\DoxyCodeLine{167 \textcolor{comment}{//   return (a-\/>x * b-\/>x) + (a-\/>y * b-\/>y) + (a-\/>z * b-\/>z);}}
\DoxyCodeLine{168 \textcolor{comment}{// \}}}
\DoxyCodeLine{169 }
\DoxyCodeLine{170 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
